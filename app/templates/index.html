{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}

{% block styles %}
{{super()}}
<link rel="stylesheet" href="{{url_for('.static', filename='styles.css')}}">
{% endblock %}

{% block scripts %}
{{super()}}
{% endblock %}


{% block app_content %}

  <div>
    <div class="container">
      <hr>
      <h3>
          Current balance: &euro; {{ line_data["monthly_balance"][-1] }}
          email: {{current_user.email}}
      </h3>
      <hr>
    </div>
  
  
    <div>
      <div class="row">
        <div class="column_left">
          <canvas height="300" id="line_plot"></canvas>
        </div>
        <div class="column_right">
          <canvas id="doughnut_plot_incoming"></canvas>
        </div>
      </div>
      <div class="row">
  
        <div class="column_left">
          <canvas id="bar_plot"></canvas>
        </div>
  
        <div class="column_right">
          <canvas id="doughnut_plot_outgoing"></canvas>
        </div>
      </div>
    </div>
  </div>
  

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-colorschemes@latest/dist/chartjs-plugin-colorschemes.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@0.7.0"></script>
  <script src="{{ url_for('static', filename='plots.js') }}"></script>
  <script type="text/javascript">
    make_line_plot("line_plot", {{ line_data["monthly_balance"] }}, {{ line_data["labels"] | safe}});
    make_bar_plot("bar_plot",  {{ bar_data["incoming"] }}, {{ bar_data["outgoing"] }}, {{ bar_data["labels"] | safe}});
    make_doughnut_plot("doughnut_plot_incoming", {{ donut_data["incoming"] }}, {{ donut_data["labels"] | safe }}, "Incoming Transactions");
    make_doughnut_plot("doughnut_plot_outgoing", {{ donut_data["outgoing"] }}, {{ donut_data["labels"] | safe }}, "Outgoing Transactions");
  </script>
{% endblock %}
